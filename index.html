<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Oasis — Facturas & Cotizaciones (Local)</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="dark">
  <!-- Login / PIN Gate -->
  <div id="authOverlay" class="overlay">
    <div class="card">
      <h1 id="authTitle">Bienvenido</h1>
      <p id="authSubtitle">Configura un PIN para proteger tu app.</p>
      <form id="authForm">
        <label id="authLabelPIN" for="authPin">PIN</label>
        <input id="authPin" type="password" inputmode="numeric" autocomplete="off" maxlength="8" placeholder="4–8 dígitos" required />
        <label id="authLabelPIN2" for="authPin2" class="hidden">Repetir PIN</label>
        <input id="authPin2" type="password" inputmode="numeric" autocomplete="off" maxlength="8" placeholder="Confirma PIN" class="hidden" />
        <button type="submit" class="btn primary" id="authBtn">Crear PIN</button>
        <p id="authMsg" class="msg"></p>
      </form>
    </div>
  </div>

  <!-- Drawer (menú lateral) -->
  <div id="drawerOverlay" class="drawer-overlay"></div>
  <aside id="drawer" class="drawer" aria-hidden="true" aria-label="Menú principal">
    <div class="drawer-header">
      <div class="drawer-brand">
        <img id="drawerLogo" alt="Logo" />
        <div class="drawer-title">
          <strong id="drawerName">Oasis</strong>
        </div>
      </div>
      <button id="btnDrawerClose" class="icon-btn" aria-label="Cerrar menú">×</button>
    </div>

    <nav class="drawer-nav" role="navigation">
      <button class="drawer-item" data-href="#nuevo">
        <span class="ico" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M12 3l9 8h-3v9h-5v-6H11v6H6v-9H3z"/></svg>
        </span><span>Inicio</span>
      </button>
      <button class="drawer-item" data-href="#historial">
        <span class="ico" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M13 3a9 9 0 1 1-6.36 2.64L4 8H1V1h7L5.64 3.36A11 11 0 1 0 13 3zm-1 4h2v6h-5V11h3z"/></svg>
        </span><span>Historial</span>
      </button>
      <button class="drawer-item" data-href="#catalogo">
        <span class="ico" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M3 3h8v8H3zM13 3h8v8h-8zM3 13h8v8H3zM13 13h8v8h-8z"/></svg>
        </span><span>Catálogo</span>
      </button>
      <button class="drawer-item" data-href="#reportes">
        <span class="ico" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M3 21V3h2v16h16v2H3zm4-4h3V9H7v8zm5 0h3V5h-3v12zm5 0h3v-7h-3v7z"/></svg>
        </span><span>Reportes</span>
      </button>
      <button class="drawer-item" data-href="#config">
        <span class="ico" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm8.94 3a7.97 7.97 0 0 1 0 2l2.06 1.6-2 3.46-2.44-1a8.14 8.14 0 0 1-1.74 1l-.37 2.6H7.55l-.37-2.6a8.14 8.14 0 0 1-1.74-1l-2.44 1-2-3.46L3.06 13a7.97 7.97 0 0 1 0-2L1 9.4 3 5.94l2.44 1a8.14 8.14 0 0 1 1.74-1L7.55 3h8.9l.37 2.6a8.14 8.14 0 0 1 1.74 1l2.44-1 2 3.46L20.94 11z"/></svg>
        </span><span>Configuración</span>
      </button>
    </nav>

    <div class="drawer-footer">
      <small class="muted">100% local • Sin dependencias</small>
    </div>
  </aside>

  <!-- Topbar (sin botones de navegación) -->
  <header class="topbar no-print">
    <div class="brand">
      <button id="btnDrawerOpen" class="icon-btn" aria-label="Abrir menú">☰</button>
      <img id="brandLogo" alt="Logo" />
      <div>
        <strong id="brandName">Oasis</strong>
        <small id="brandSubtitle">Facturas & Cotizaciones</small>
      </div>
    </div>
  </header>

  <main>
    <!-- (… secciones iguales que antes …) -->

    <!-- TAB: REPORTES -->
    <section id="tab-reportes" class="tab">
      <div class="panel">
        <div class="row">
          <div class="col">
            <label>Por rango</label>
            <div class="inline">
              <input id="repDesde" type="date" />
              <input id="repHasta" type="date" />
              <button id="btnRepRango" class="btn">Filtrar</button>
            </div>
          </div>
          <div class="col">
            <label>Por mes</label>
            <div class="inline">
              <input id="repMes" type="month" />
              <button id="btnRepMes" class="btn">Aplicar</button>
            </div>
          </div>
        </div>

        <div id="repResumen" class="resumen">
          <div>FAC — Cantidad: <strong id="cntFAC">0</strong> | Total: <strong id="totFAC">$0.00</strong></div>
          <div>COT — Cantidad: <strong id="cntCOT">0</strong> | Total: <strong id="totCOT">$0.00</strong></div>
          <div>General — Cantidad: <strong id="cntALL">0</strong> | Total: <strong id="totALL">$0.00</strong></div>
        </div>

        <div class="row no-print">
          <button id="btnCSV" class="btn">Exportar CSV</button>
          <button id="btnPDF" class="btn">Exportar PDF</button>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Número</th>
              <th>Fecha</th>
              <th>Cliente</th>
              <th>Pago</th><!-- ← AÑADIDO -->
              <th>Total</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody id="repBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <div id="printArea" class="print-area"></div>

  <footer class="no-print footer">
    <small>Oasis • 100% local • Sin dependencias • Hecho para iPad/celular</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
